Name: @PACKAGE_TARNAME@
Version: @PACKAGE_VERSION@
Release: 1%{?dist}
Summary: N2PKVNA Library and Utilities
Group: Applications/Engineering
License: GPLv3+
URL: http://www.rompromity.net/libvna/test+measurement/index.html
Source: %{name}-%{version}.tar.gz
BuildRequires: libyaml-devel
Requires:	fxload

%description
n2pkvna provides a library and utilities for the N2PK Vector Network Analyzer

%package	devel
Summary:	Development files for %{name}
Group:		Development/Libraries

%description devel
The %{name}-devel package contains libraries, header files and documentation
for developing applications that use %{name}.

%prep
%setup -q

%build
%configure
make %{?_smp_mflags}

%install
make DESTDIR=$RPM_BUILD_ROOT install
find $RPM_BUILD_ROOT -name '*.la' -exec rm -f {} \;

%pre
if [ "$1" == 1 ]; then
    groupadd -f n2pkvna || :
fi

%post
udevadm control --reload-rules
/sbin/ldconfig

%postun
if [ "$1" == 0 ]; then
    rmdir "%{_prefix}/lib/firmware/n2pkvna" || :
    /sbin/ldconfig
    udevadm control --reload-rules || :
    groupdel -f n2pkvna || :
fi

%clean
make clean

%files
%defattr(-,root,root,-)
%doc README COPYING
%{_libdir}/*.so.*
%{_prefix}/lib/firmware/*
%{_prefix}/lib/udev/rules.d/*
%{_bindir}/n2pkvna

%files devel
%{_docdir}/%{name}/*
%{_includedir}/*
%{_libdir}/*.so
%{_libdir}/*.a
%{_mandir}/*/*
%{_bindir}/*


%changelog
